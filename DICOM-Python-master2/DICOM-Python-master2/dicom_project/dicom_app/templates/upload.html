{% extends 'base.html' %}

{% block title %}Subir DICOM - DICOM HUB{% endblock %}

{% block content %}
<div class="dashboard-header-top">
    <div class="dashboard-brand">DICOM HUB</div>
</div>

<div class="container mt-4">
    <div class="content-card">
        {% if messages %}
        {% for message in messages %}
        <div class="success-message">
            {{ message }}
        </div>
        {% endfor %}
        {% endif %}

        <div class="form-header-actions">
            <h2 class="form-title">Subir nuevo DICOM</h2>
            <div class="form-actions">
                <a href="{% url 'dashboard' %}" class="btn-cancel">‚Üê Volver</a>
            </div>
        </div>

        <form method="post" enctype="multipart/form-data">
            {% csrf_token %}

            <div class="form-group-custom">
                <label for="dicom_file">Seleccionar archivos DICOM</label>
                <input type="file" id="dicom_file" name="dicom_file" accept=".dcm" multiple class="input-custom"
                    onchange="updateFileList(this)">
                <div id="fileList" class="text-muted" style="margin-top: 0.5rem;"></div>
            </div>

            <div style="text-align: center; margin-top: 2rem;">
                <button type="submit" class="btn-save" style="min-width: 200px;">
                    <i class="fas fa-upload"></i> Subir DICOM
                </button>
            </div>
        </form>
    </div>
</div>

<script>
    function updateFileList(input) {
        const fileList = document.getElementById('fileList');
        if (input.files.length > 0) {
            const files = Array.from(input.files).map(f => f.name).join(', ');
            fileList.textContent = `Archivos seleccionados: ${files}`;
        } else {
            fileList.textContent = '';
        }
    }
</script>
{% endblock %}